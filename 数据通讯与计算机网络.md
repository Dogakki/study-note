## 考试大纲

### 主观题1 数据编码与传输

### 主观题2 差错控制

### 主观题3 数据交换

### 主观题4 网络拓扑结构

### 主观题5 网络体系结构

### 主观题6 网络安全

### 主观题7 网络设备

### 主观题8 局域网

### 主观题9 Internet

### 主观题10 网络规则与设计





## 一.数据编码与传输

### 1.数字数据的数字传播

数字数据--->线路编码-->解码-->数据

#### 1.单极性归零码

高电平只持续一段时间，其他事件返回低电平

![image-20231204132052499](E:\typora\Project\数据通讯与计算机网络.assets\image-20231204132052499.png)

#### 2.单极性不归零码

用0表示低电平，用1表示高电平

![image-20231204132411510](E:\typora\Project\数据通讯与计算机网络.assets\image-20231204132411510.png)

#### 3.双极性归零码

红色的线表示数据，只占据一部分的周期，剩下周期部分为归零段

![image-20231204132502323](E:\typora\Project\数据通讯与计算机网络.assets\image-20231204132502323.png)

#### 4.双极性不归零码

![image-20231204132924890](E:\typora\Project\数据通讯与计算机网络.assets\image-20231204132924890.png)

#### 5.曼彻斯特码

以跳变方向来判断是“0”还是“1”，从高电平跳到低电平是“1”，从低电平跳到高电平是“0”。

<img src="https://pic1.zhimg.com/80/v2-91104993ea8a50098738728f7470af14_720w.webp" alt="img" style="zoom:67%;" />

#### 6.差分曼彻斯特码

与上一位作对比，开始时有跳变表示“0”，没跳变表示“1”，查分曼彻斯特码由于第一位开始的电平不同，会有两种查分曼彻斯特码。

以下为一种查分曼彻斯特编码

<img src="E:\typora\Project\数据通讯与计算机网络.assets\image-20231204134014029.png" alt="image-20231204134014029" style="zoom: 150%;" />

### 例题：

![image-20231206151124590](E:\typora\Project\数据通讯与计算机网络.assets\image-20231206151124590.png)

## 二.差错控制

差错控制是指能够在数据通信过程中能发现和纠正差错，把差错限制在尽可能小的范围之内的技术和方法。

衡量一个通信系统差错的重要参数是误码率Pe
$$
Pe=\frac{发生差错的码元数}{接收的总码元数}
$$

### 1.差错的产生原因

一般可以分为两类，一类是信道固有的、持续存在的随机热噪声，另一类是由外界特定的短暂原因造成的冲击噪声

### 2.差错控制编码

#### 2.1奇偶校验码

通过增加冗余位，使得码字中的1的个数为奇数或偶数的编码方法。

**纵向奇偶校验、横向奇偶校验：**

​	对行或者列进行奇偶校验，但只能检测出奇数个错或者偶数个错，漏检率达到½

**纵横奇偶校验**：

​	同时进行纵向校验和横向校验，检测效果很好。

#### 2.2循环冗余校验码（CRC）

CRC在编码和译码的过程中常常需要进行多项式的加法和除法运算。

`CRC的编码`

用多项式表示信息和校验码的过程

首先要接收方和发送方必须事前商定一个多项式G(x)，用于表示一个二进制信息。

k位信息码可以表示成一个（k-1）次的多项式k(x)，r位冗余校验码则对应于一个（r-1)次多项式r(x)

由于信息码后面要加r位冗余码，故多项式为X^r * k(x)

则对一个（n-1)次多项式T(x)，有传输有差错
$$
T(x)=x^r k(x)+r(x)\\
循环冗余码:10100011101-->T(x)=x^4 k(x)+r(x)=x^10+x^8+x^4+x^3+x^2+1
$$

`CRC的译码`

在接收端译码有两个要求，检错和纠错

当接收到T(x)后，就用商定好的G(x)去除，若没有余数，则传输没有差错；若有余数，则传输有差错

若没有差错，则循环冗余码为信息位与冗余位拼在一起

若有差错，则循环冗余码为错误码加上相除后的余式

### 例题

![image-20231206151218788](E:\typora\Project\数据通讯与计算机网络.assets\image-20231206151218788.png)

## 三.数据交换



### 1.电路交换

电路交换是指在发送端和接收端之间建立电路连接，并将连接状态保持到通信结束的一种交换方式。

![image-20231204145901955](E:\typora\Project\数据通讯与计算机网络.assets\image-20231204145901955.png)

(1)建立连接

确定源站与目标站，不能直接连接的需要与节点进行连接，最后得到具体的段数，每一段都要乘以段的传输延迟时间。建立时间与段数无关，无须多乘。
$$
T=n*t_{Dealy}+t_{build}\\n=段数
$$
(2)通信
$$
T_{trans}=（净载荷）/数据速率
$$
(3)电路拆除。在数据传输结束后，由源节点或目标节点发出拆除请求，然后逐节点删除，不占用传输时间。

![image-20231206192245046](E:\typora\Project\数据通讯与计算机网络.assets\image-20231206192245046.png)

### 2 报文交换

报文交换是以报文为数据交换的单位，报文中含有目标节点的地址。源主机（应用）发送的**信息整体**，如一个文件，报文整个地发送，一次一跳，报文交换是分组交换的前身。

报文至少包括报文的起始标志、数据的开始标志、源节点地址、目的节点地址、控制信息、报文编号

![image-20231206190515486](E:\typora\Project\数据通讯与计算机网络.assets\image-20231206190515486.png)

### 3.多路复用技术

多路复用技术是一种将两个或多个彼此独立的信号合并为一个复合信号，在一条信道上进行传输的技术。

#### 3.1 频分多路复用 FDM

将几路基带信号以不同的载波频率进行调制，再叠加形成一个复合信号在一条物理信道上传输的技术。就是在物理信道的频率带宽大大超过单一原始信号所需要的带宽的情况下，可以将物理信道的总带宽分割成多个与传输单个信号带宽相同（略宽）的子信道，每个信道传输一路信号。

![img](https://img-blog.csdnimg.cn/20210228202222432.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0dhbzA2ODQ2NQ==,size_16,color_FFFFFF,t_70)

#### 3.2 时分多路复用

​     若物理信道能够达到的位传输速率超过各路信号源所要求的的数据传输速率，可以采用时分多路复用技术。时分多路复用TDM是将一条物理信道按时间分为若干时间片轮换地给多个信号使用，每一时间片由复用的一个信号占用，这样可以在一条物理信道上传输多个数字信号。



### 4.虚电路分组交换

​       虚电路分组交换是一种面向连接的分组交换。在该方式下，在传输数据之前，必须先在源与目的地之间建立一条逻辑通络，即虚电路，数据交换结束后，虚电路被拆除。

​       虚电路分组交换方式在每次通信时都会有，虚电路建立、数据传输和拆除三个过程，类似于电路交换方式，但在网络中的传输是分组交换方式。虚电路分组中因为有一条专属的逻辑通路，所以报文中不用携带报头。

​		虚电路分组交换需要有建立时间，但不需要有报头，在到达第一个节点之前不用分组，（3200/9600），3200向上取整可分为四组同时进行，传输两段，则时间为2×（1024）/9600，最后加上建立时间和每段的传输延迟，得到总的传播时间。

![image-20231206190450885](E:\typora\Project\数据通讯与计算机网络.assets\image-20231206190450885.png)

### 5.数据报分组交换

​       数据报分组交换是一种无连接的分组交换。他不需要预先建立逻辑连接，而是按照每个分组头中的目的地址对每个分组独立进行选路的分组交换模式，每个分组有完整的目的地址。

​       在把报文信息拆解后，需要分别加入报头，线路上有3200bits,向上取整可以分为4个分组，每个分组1024bit，每个分组需要携带一个报头，所以总bit为（3200+4*16），报文只有经过第一个节点之后才会分组，所以分组前为(3200+4×16)/9600,分组后分为四个分组同时进行传输，传输两段，则时间为2×（1024/9600），最后加上每段都有的传输延迟3×0.001。

![image-20231206190819471](E:\typora\Project\数据通讯与计算机网络.assets\image-20231206190819471.png)



### 例题

![image-20231206172916733](E:\typora\Project\数据通讯与计算机网络.assets\image-20231206172916733.png)

![image-20231206151332423](E:\typora\Project\数据通讯与计算机网络.assets\image-20231206151332423.png)

![image-20231206151357084](E:\typora\Project\数据通讯与计算机网络.assets\image-20231206151357084.png)

## 四.网络拓扑结构

### 1.星形拓扑

![image-20231204161133946](E:\typora\Project\数据通讯与计算机网络.assets\image-20231204161133946.png)

星型拓扑结构是一个中心，多个分节点。中央节点执行集中式控制策略，因此中央节点相当复杂，负担比其他各节点重的多。

优点：结构简单，连接方便，管理和维护都相对容易，而且扩展性强。网络延迟时间较小，传输误差低。中心无故障，一般网络没问题。

缺点：中心故障，网络就出问题，同时共享能力差，通信线路利用率不高。

### 2.环形拓扑

![image-20231204161240103](E:\typora\Project\数据通讯与计算机网络.assets\image-20231204161240103.png)

环形拓扑结构是节点形成一个闭合环。环形网中各节点通过环路接口连在一条首尾相连的闭合环形通信线路中，环上任何节点均可请求发送信息。传输媒体从一个端用户到另一个端用户，直到将所有的端用户连成环型。数据在环路中沿着一个方向在各个节点间传输，信息从一个节点传到另一个节点。

这种结构显而易见消除了端用户通信时对中心系统的依赖性。每个端用户都与两个相临的端用户相连，因而存在着点到点链路，但总是以**单向方式操作**，于是便有上游端用户和下游端用户之称。

优点：信息流在网中是沿着固定方向流动的，两个节点仅有一条道路，简化了路径选择的控制；环路上各节点都是自举控制，控制软件简单。

缺点：信息源在环路中是串行地穿过各个节点，当环中节点过多时，势必影响信息传输速率，使网络的响应时间延长；环路是封闭的，不便于扩充；可靠性低，一个节点故障，将会造成全网瘫痪；维护难，对分支节点故障定位较难。



### 3.总线型拓扑

![image-20231204162653636](E:\typora\Project\数据通讯与计算机网络.assets\image-20231204162653636.png)

总线拓扑结构所有设备连接到一条连接介质上。由一条高速公用总线连接若干个节点所形成的网络即为总线形网络，每个节点上的网络接口板硬件均具有收、发功能，接收器负责接收总线上的串行信息并转换成并行信息送到PC工作站；发送器是将并行信息转换成串行信息后广播发送到总线上，总线上发送信息的目的地址与某节点的接口地址相符合时，该节点的接收器便接收信息。由于各个节点之间通过电缆直接连接，所以总线型拓扑结构中所需要的电缆长度是最小的，但总线只有一定的负载能力，因此总线长度又有一定限制，一条总线只能连接一定数量的节点。

优点：总线结构所需要的电缆数量少，线缆长度短，易于布线和维护。多个节点共用一条传输信道，信道利用率高。

缺点：总线形网常因一个节点出现故障（如结头接触不良等）而导致整个网络不通，因此可靠性不高。



### 4.树形拓扑

![image-20231204162756823](E:\typora\Project\数据通讯与计算机网络.assets\image-20231204162756823.png)

树形拓扑从总线拓扑演变而来,形状像一棵倒置的树,顶端是树根,树根以下带分支,每个分支还可再带子分支，树根接收各站点发送的数据,然后再广播发送到全网。我国电话网络即采用树形结构。

优点：结构比较简单，成本低。在网络中，任意两个节点之间不产生回路，每个链路都支持双向传输。网络中节点扩充方便灵活，寻找链路路经比较方便。

缺点：在这种网络系统中，除叶节点及其相连的链路外，任何一个节点或链路产生的故障都会影响整个网络。



### 5.网状拓扑

![image-20231204162845396](E:\typora\Project\数据通讯与计算机网络.assets\image-20231204162845396.png)

主要指各节点通过传输线互联连接起来，并且每一个节点至少与其他两个节点相连。网状拓扑结构具有较高的可靠性，但其结构复杂，实现起来费用较高，不易管理和维护，不常用于局域网。

优点：网络可靠性高，一般通信子网任意两个节点交换机之间，存在着两条或两条以上的通信路径。可扩充性好，网络可建成各种形状，采用多种通信信道，多种传输速率。

缺点：网络结构复杂，成本高，不易维护。



### 6.混合型拓扑

将两种或几种网络拓扑结构混合起来构成的一种网络拓扑结构称为混合型拓扑结构（也有的称之为杂合型结构）。





## 五.网络体系结构

### 1.开放系统互连参考模型（OSI/RM)

OSI构造了堆栈式的七层模型：物理层、数据链路层、网络层、传输层、会话层、表示层及应用层。

![img](https://img-blog.csdnimg.cn/20201024121835707.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ2NDU2MDQ5,size_16,color_FFFFFF,t_70#pic_center)

其中应用层、表示层、会话层共同构成了资源子网

网路层、数据链路层、物理层共同构成了通信子网

传输层起到了屏蔽的作用

#### 1.1物理层

​		物理层是OSI分层结构体系中最重要、最基础的一层，它建立在传输媒介基础上，起建立、维护和取消物理连接作用，实现设备之间的物理接口。物理层之接收和发送一串比特(bit)流，不考虑信息的意义和信息结构。

物理层包括对连接到网络上的设备描述其各种机械的、电气的、功能的规定。

物理层的数据单位是`比特`，数据单元`二进制`,。

物理层的典型设备：`光纤`、`同轴电缆`、`双绞线`、`中继器`和`集线器`。

#### 1.2数据链路层

​		在物理层提供比特流服务的基础上，将比特信息封装成数据帧Frame，将物理链路改造成逻辑数据电路，起到在物理层上建立、撤销、标识逻辑链接和链路复用以及差错校验等功能。通过使用接收系统的硬件地址或物理地址来寻址。建立相邻结点之间的数据链路，通过差错控制提供数据帧（Frame）在信道上无差错的传输，同时为其上面的网络层提供有效的服务。

​		数据链路层在不可靠的物理介质上提供可靠的传输。该层的作用包括：物理地址寻址、数据的成帧、流量控制、数据的检错、重发等。



​		在这一层，数据的单位称为`帧（frame）`。

#### 1.3网络层

​		网络层也称通信子网层，主要功能是完成网络中主机到主机的数据传输。在计算机网络中进行通信的两个计算机之间可能会经过很多个数据链路，也可能还要经过很多通信子网。网络层的任务就是选择合适的网间路由和交换结点，确保数据及时传送。网络层将解封装数据链路层收到的帧，提取数据包，包中封装有网络层包头，其中含有逻辑地址信息源站点和目的站点地址的网络地址。

​		提供了**数据报服务**和**虚电路服务**。

​		在数据通讯过程中，传输层输出的数据段在此处会增添显示信息的IP首部编程数据包。

网络层典型设备：`路由器`。

#### 1.4传输层

​		传输层建立在网络层和会话层之间，实质上它是网络体系结构中高低层之间衔接的一个接口层。用一个寻址机制来标识一个特定的应用程序（端口号）。传输层不仅是一个单独的结构层，它还是整个分层体系协议的核心，没有传输层整个分层协议就没有意义。

​		传输层的数据单元是由数据组织成的数据段（segment）这个层负责获取全部信息，因此，它必须跟踪数据单元碎片、乱序到达的数据包和其它在传输过程中可能发生的危险。

​		传输层传输的信息为`报文`，较长的报文会被分割成若干个小`段`，然后交给网络层进行通信。

​		在数据传输中，数据经过传输层会增添TCP首部，使数据变成数据段。

#### 1.5会话层

​		这一层也可以称为会晤层或对话层，在会话层及以上的高层次中，数据传送的单位不再另外命名，统称为报文。会话层为传输的报文提供同步管理服务1会话层不参与具体的传输，它提供包括访问验证和会话管理在内的建立和维护应用之间通信的机制。如服务器验证用户登录便是由会话层完成的。

​		会话层提供的服务可使应用建立和维持会话，并能使会话获得同步。会话层使用校验点可使通信会话在通信失效时从校验点继续恢复通信。这种能力对于传送大的文件极为重要。

#### 1.6表示层

​		表示层对向上对应层服务，向下接收来自会话层的服务。表示层是为在应用过程之间传送的信息提供表示方法的服务，它关心的只是发出信息的**语法与语义**。表示层要完成某些特定的功能，主要有不同数据编码格式的转换，提供数据压缩、解压缩服务，对数据进行加密、解密。例如图像格式的显示，就是由位于表示层的协议来支持。

​		表示层为应用层提供服务包括语法选择、语法转换等。语法选择是提供一种初始语法和以后修改这种选择的手段。语法转换涉及代码转换和字符集的转换、数据格式的修改以及对数据结构操作的65738

#### 1.7应用层

​		网络应用层是通信用户之间的窗口，为用户提供网络管理、文件传输、事务处理等服务。其中包含了若干个独立的、用户通用的服务协议模块。网络应用层是OSI的最高层，为网络用户之间的通信提供专用的程序。

​		通讯过程中，在应用层获取最初的上层数据。



#### 1.8数据传输过程

<img src="https://img-blog.csdnimg.cn/20201028134158932.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3d3eTAzMjQ=,size_16,color_FFFFFF,t_70#pic_center" alt="img" style="zoom:80%;" />

​		数据在源节点计算机向下传递的时候，到达一层，加上这一层的控制信息，称之为首部。数据在目的节点计算机向上传递的时候，到达一层，去掉这一层的控制信息。

​		数据封装从应用层-->...-->物理层，又上而下逐层增加信息报头，最后在物理层以二进制的形式发送出去。

​		数据解封装从物理层-->...-->应用层，当物理层接收到其他网络发送过来的信息后，由下至上逐层校验去除报头，最后在应用层获取发送过来的数据。

​		数据包在不同层的称呼也有所不同，物理层称之为比特，数据链路层称之为帧，网络层称之为分组，第4层-第7层称之为报文。



### 2.TCP/IP参考模型（获取最广泛的使用，成为目前的国际标准）

![img](https://img-blog.csdnimg.cn/20210310111931783.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDY4NTYyNg==,size_16,color_FFFFFF,t_70)

#### 2.1网络接口层(物理层)

主要任务是在物理媒体上实现比特流的透明传输。物理层传输单位是比特。

- 主要功能：
  定义接口特性；定义传输模式：单工、半双工、全双工；定义传输速率；比特同步；比特编码

#### 2.2  网络互联层

​	TCP/IP协议网络层的作用是在复杂的网络环境中为要发送的数据报找到一个合适的路径进行传输。简单来说，网络层负责将数据传输到目标地址，目标地址可以是多个网络通过路由器连接而成的某一个地址。另外，网络层负责寻找合适的路径到达对方计算机，并把数据帧传送给对方，网络层还可以实现拥塞控制、网际互连等功能。网络层协议的代表包括：ICMP、IP、IGMP等。

#### 2.3 传输层

​	传输层的协议，解决了诸如端到端可靠性问题，能确保数据可靠的到达目的地，甚至能保证数据按照正确的顺序到达目的地。传输层的主要功能大致如下：

（1）为端到端连接提供传输服务；

（2）这种传输服务分为可靠和不可靠的，其中TCP是典型的可靠传输，而UDP则是不可靠传输；

（3）为端到端连接提供流量控制、差错控制、QoS(Quality ofService)服务质量等管理服务。

​	传输层有两个性质不同的协议：TCP传输控制协议和UDP用户数据报协议。

​	TCP协议是一个面向连接的、可靠的传输协议，它提供一种可靠的字节流，能保证数据完整、无损并且按顺序到达。TCP尽量连续不断地测试网络的负载并且控制发送数据的速度以避免网络过载。另外，TCP试图将数据按照规定的顺序发送。

​	总体来说，TCP协议传输效率低，但可靠性强；UDP协议传输效率高，但可靠性略低，适用于传输可靠性要求不高、体量小的数据（比如QQ聊天数据）。

#### 2.4 应用层

​		应用层包括所有和应用程序协同工作，并利用基础网络交换应用程序的业务数据的协议。一些特定的程序被认为运行在这个层上，该层协议所提供的服务能直接支持用户应用。应用层协议包括HTTP（万维网服务）、FTP（文件传输）、SMTP（电子邮件）、SSH（安全远程登陆）、DNS（域名解析）以及许多其他协议。





<img src="https://img-blog.csdnimg.cn/20201024123848852.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ2NDU2MDQ5,size_16,color_FFFFFF,t_70#pic_center" alt="img" style="zoom:150%;" />





### 3.TCP/IP与OSI/RM的异同

**相同点**

​	① OSI 参考模型与 TCP/IP 参考模型都采用了层次结构。

​	② 都能够提供面向连接和无连接两种通信服务机制。

**不同点**

​	① OSI 采用的七层模型； TCP/IP 是四层结构。

​	② TCP/IP 参考模型没有对网络接口层进行细分，只是一些概念性的描述； OSI 参考模型对服务和协议做了明确的区分。

​	③ OSI 先有模型，后有协议规范，适合于描述各种网络；TCP/IP 是先有协议集然后建立模型，不适用于非 TCP/IP 网络。

​	④ TCP/IP 一开始就提出面向连接和无连接服务，而 OSI 一开始只强调面向连接服务，直到很晚才开始制定无连接的服务标	准。

​	⑤ OSI 参考模型虽然被看好，但将网络划分为七层，实现起来较困难；相反，TCP/IP 参考模型虽然有许多不尽人意的地		方，但作为一种简化的分层结构还是比较成功的。

## 六.网络安全

### 1.网络安全的概念

​		安全就是最大程度地减少数据资源被攻击的可能性。

### 2.网络安全的重要性

​		网络安全一般是指网络信息的**可用性**、**完整性**、**保密性**、**真实性**和**安全保证**。

### 3.网络安全的威胁因素

​		**中断**：以可攻击性作为攻击目标，它毁坏系统资源，切断通信线路，造成文件系统不可用。

​		**修改**：以完整性作为攻击目标，非授权用户不仅获得对系统资源的访问权限，而且对文件进行篡改。

​		**伪造**：以完整性作为攻击目标，非授权用户将伪造的数据插入到正常系统中，如在网络上散布谣言等。

​		**截获**：以保密性作为攻击目标，非授权用户通过某种手段获得对系统资源的访问权限造成信息泄密，如信息被窃听。

### 4.网络安全系统的功能

​	**身份认证**、**访问控制**、**数据保密**、**数据完整**、**防抵赖**、**秘钥管理**

## 七.网络设备

### 1.交换机

​	交换机工作于数据链路层，故也被称为二层交换机。

​	交换机也被称为交换式集线器，是专门用来使各种计算机能够相互告诉通信的独享带宽的网络设备

#### 1.1交换机的工作原理

​	交换机内部有一个地址表。这个表标明了MAC(局域网)地址与交换机端口的对应关系。

`具体过程如下`

（1）交换机某端口收到数据包。

（2）读取数据包头的源MAC地址。

（3）交换机读取数据包头中的目的MAC地址，并在地址表中查找相应的端口。

（4）若能找到对应的端口，就把数据包直接复制到端口上；若找不到对应的端口，则对所有端口进行分析广播。

（5）当目的机器对源机器回应时，交换机会学到目的MAC与哪个端口相对应，以后便无须向所有端口广播。

（6）在这个循环过程中，交换机不断建立和维护自己的地址表。

<img src="E:\typora\Project\数据通讯与计算机网络.assets\image-20231205221648444.png" alt="image-20231205221648444" style="zoom:67%;" />

<img src="E:\typora\Project\数据通讯与计算机网络.assets\image-20231205221709225.png" alt="image-20231205221709225" style="zoom:67%;" />

#### 1.2 交换机的数据包交换方式

**（1）直通**

​	直通方式的以太网交换机可以理解为在各端口间是纵横交叉的线路矩阵电话交换机。它在输入端口检测到一个数据包时，检查该包的包头，获取包的目的地址，启动内部的动态查找表转换成相应的输出端口，在输入与输出交叉处接通，把数据包直通到相应的端口，实现交换功能。

​	优点：由于不需要存储，延迟非常小、交换非常快。

​	缺点：数据包内容并没有被以太网交换机保存下来，所以无法检查所传送的数据包是否有误，不能提供错误检测能力。由于没有缓存，不能将具有不同速率的输入/输出端口直接接通，而且容易丢包。

**（2）存储转发**

​	存储转发方式是计算机网络领域应用最为广泛的方式。它把输入端口的数据包先存储起来，然后进行CRC(循环冗余码校验)检查，在对错误包处理后才取出数据包的目的地址，通过查找表转换成输出端口送出包。

​	优点：它可以对进入交换机的数据包进行错误检测，有效地改善网络性能。尤其重要的是它可以支持不同速度的端口间的转换，保持高速端口与低速端口间的协同工作。

​	缺点：存储转发方式在数据处理时延时大。

**（3）碎片隔离**

​	这是介于前两者之间的一种解决方案。它检查数据包的长度是否够64个字节，如果小于64字节，说明是假包，则丢弃该包;如果大于64字节，则发送该包。这种方式也不提供数据校验。它的数据处理速度比存储转发方式快，但比直通式慢。

#### 1.3路由交换机

​		路由交换机也被称为三层交换机。它通过使用硬件交换机来实现IP路由功能，从而提高路由过程的效率，加强帧的转发能力。

​		在通信的时候进行判断，如果两端处于同一子网内，择按照两层路由器进行；若不在同一子网内，就按三层交换机使用。

​		`传播过程`

​		发送端：

![image-20231207140622087](E:\typora\Project\数据通讯与计算机网络.assets\image-20231207140622087.png)

​		接受端：

<img src="E:\typora\Project\数据通讯与计算机网络.assets\image-20231207140640114.png" alt="image-20231207140640114" style="zoom:80%;" />

#### 1.4 四层交换机

​		四层交换机在完成信息的交流与传输的过程中，不仅会用到MAC(二层)，还会用到IP(三层)，TCP/UDP(四层)。

### 2.交换机的技术参数

​		1.MAC地址的数量

​		2.端口类型

​		3.端口和插槽数量

​		4.传输模式与速率

​		5.交换宽带

### 3.路由器

#### 3.1路由的概念

​	   路由就是数据包从源主机到目标主机的转发过程。

​	   路由选择是路由器根据所收到的数据包头的目的地址选择一个合适的路径，将数据包传送到下一个路由器，路径上的最后的路由器负责将数据包送交目的的主机。

​		**交换机用于局域网内网的数据转发；路由器用于连接局域网和外网。**

​		`路由表:`

![image-20231206110413669](E:\typora\Project\数据通讯与计算机网络.assets\image-20231206110413669.png)

​		(1)目的网络地址（Dest):用于标识IP包到达的目的逻辑网络或子网地址。

​		(2)掩码（Mask)：与目的地址一起来标识目的的主机或者路由器所在的网段的地址，将目的地址和网络掩码进行“逻辑与”运算后可以得到目的主机或路由器所在网段的地址。

​		(3)下一跳地址（GW)：与承载路由表的路由器相邻的路由器的端口地址。

​		(4)发送的物理端口（Interface)：学习到该路由条目的接口，也是数据包离开路由器去往目的地将经过的接口。

​		(5)路由信息的来源（Owner)：表示该路由信息是怎么学习到的。

​		(6)路由优先级(Pri)：路由来源不同，其路由信息的优先权不同。这决定了路由信息的优先权。

​		(7)度量值(Metric)：用于表示每条可能路由的代缴，其中度量值最小的路由就是最佳路由。

#### 2.2 路由器的基本功能

路由器有两个基本功能：**路由功能**和**交换功能**

路由功能：判定到达目的地的最佳路径，由路由选择算法来实现。

交换功能：沿最佳路径传送信息分组。

#### 2.3 路由器的工作原理

位于同一网络内部的通信不需要经过路由器转发，网络之间的通信必须经过路由器转发。

![image-20231206111919088](E:\typora\Project\数据通讯与计算机网络.assets\image-20231206111919088.png)

通信过程：

![image-20231206112011186](E:\typora\Project\数据通讯与计算机网络.assets\image-20231206112011186.png)

#### 2.4 路由器协议简介

​		路由协议就是在路由指导IP数据包发送过程中所采用的事先约定好的规定与标准。路由协议与路由器协同工作，执行**路由选择**与**数据包转发**功能。

​		`路由选择`：分为**静态路由**与**动态路由**。

​		**静态路由**是有系统管理员手工设置的路由，一般在安装系统时就根据网络的配置被预先设定。它不会随未来网络拓扑结构		的改变而自动改变。

​		**动态路由**是网络中的路由器在相互通信、传递路由信息、利用收集到的信息更新路由器表后所形成的路由。动态路由能够		根据网络系统的运行情况而自动调整，因此能够实时适应网络结构的变化。

​		根据是否在同一个自治域内部使用，动态路由所采用的的路由选择分为内部网关协议和外部网关协议。内部网关协议中常		见的有**RIP(路由信息协议）**、**OSPF（开放最短路由优先协议）**等等。

​		`RIP协议:`

​		作用：路由器收集所有可达到目的地的不同路径，并只保存到达目的地的最佳路径，其他信息均予以丢弃。	

​		步骤如下：

​		(1)在RIP启动时，初试路由表仅包含本路由器的一些直连接口路由。

​		(2)在RIP协议启动后，路由器向各接口广播一个Request报文。

​		(3)邻居路由器的RIP从某接口收到Request报文后，根据自己的路由表形成Response报文，向该接口对应的网络广播。

​		(4)路由器接受邻居路由器回复的包含邻居路由器路由表的Response报文，一并形成自己的路由表。

​		(5)收到Response报文后，路由器计算报文中的路由项的度量值，比较其与本地路由表路由度量值的差别，然后更新自己		的路由表，直到自己的路由表达到收敛。

​		`OSPF协议:`

​		作用：OSPF不仅能够计算两个网络节点之间的最佳路径，还能够计算通信费用；可以根据网络用户的要求来平衡费用和		性能，以选择相应的路由。

​		步骤如下：

​		(1)当路由器初始化或者网络结构发生变化时，路由器会产生链路状态广播数据包（LSA），该数据包中有路由器上相连的		所有链路的信息。

​		(2)所有路由器通过刷新来交换链路状态数据，刷新是指路由器将数据包传送给所有相邻的OSPF路由器，相邻路由器接受		到数据包后，更新自己的数据库并将状态信息传递给相邻路由器，直到达成稳定。

​		(3)当网络状态稳定之后，所有路由器都可以根据链路状态计算自己的路由表。路由表中包含能到达的所有目的地的Cost		和到达目的地后要转发的下一个路由器。



## 八.局域网

​		局域网是局部区域网的简称，英文缩写为LAN。局域网是一种在有限的地理范围内利用通信线路和通信设备将众多计算机及外围设备连接起来，实现了数据传输和资源共享的计算机网络。

### 1.局域网的特点和分类

`特点:`

覆盖范围小，传输率高，误码率低，单位专用，易于实现，关键技术

`分类：`

### 2.IEEE 802参考模型

<img src="https://img-blog.csdnimg.cn/48da94fdeddb4103ac98fc9699891967.png" alt="img" style="zoom:80%;" />

​	(1)IEEE802.1标准,它包括局域网体系结构,网络互联,以及网络管理与性能测量.
​	(2)IEEE802.2标准, 定义了逻辑链路控制层的功能与服务.
​	(3)IEEE802.3标准,定义了CSMA/CD总线介质访问控制方法与物理规范.
​	(4)IEEE802.4标准,定义了令牌总线(Token Bus)介质访问控制方法与物理层规范.
​	(5)IEEE802.5标准,定义了令牌环(Token Ring)介质访问控制方法与物理层规范.
​	(6)IEEE802.6标准,定义了城域网WAN访问控制方法与物理层规范.
​	(7)IEEE802.7标准,定义了宽带技术.
​	(8)IEEE802.8标准,定义了光纤技术.
​	(9)IEEE802.9标准,定义了综合语音与数据局域网IVD LAN技术.
​	(10)IEEE802.10标准,定义了可互操作的局域网安全性规范SILS.
​	(11)IEEE802.11标准,定义了无线局域网技术.

### 3.带有冲突检测的载波侦听多点访问方法

IEEE 802.3标准协议规定了带有冲突检测的载波侦听多点(CSMA/CD)访问方法和物理层技术规范。

`CSMA/CD的发送过程:`

先听后发、边听边发、冲突暂停、延时发送

(1)网络中任何一个工作站在发送信息前，都要侦听网络中有无其他工作站在发送信息（先听后发）。假如信道是空闲的，则发送。如果信道忙，此工作站要等待一段时间之后再争取发送权，直到检测到信道空闲后，才能发送信息。

(2)工作站开始占用信道发送信息时，用冲突检测器继续对网络检测一段时间，一边发送一边监听，若信息相同，则证明发送正常，占用总线成功，继续发送；若结果不一致，则说明有冲突，应立刻停止发送。

(3)如果在发送信息的过程中检测到冲突，即发送的信息与监听的信，则进入发送**“冲突加强信号”**阶段，此时要向总线上发送一串阻塞信号，通知总线上各站冲突已经发生。再等待一个随机时间后，重复上述过程进行发送。

`CSMA/CD的接收过程:`

信道上连接的每个站点时刻都在监听总线，如果有消息帧到来，则接收。读取MAC帧后得到目的地址，如果目的地址是本站点，则复制做下一步处理；若不是，则丢弃该帧。

`CSMA/CD的特点:`

优点：原理比较简单，技术上容易实现，各工作站处于平等地位，不需集中控制，网络维护方便。

缺点：不能保证在一个确定时间内把信息发送到对方而不发生碰撞，不适宜要求实时性强的应用。总线对负载很敏感，负载增大时，效率下降。

### 4.令牌环访问控制方法

IEEE 802.5标准规定了令牌总线（Token Ring)访问控制方法和物理层技术规范。

`令牌环控制方法的过程:`

(1)发送站点获取空闲“令牌”，获得发送信息的资格。

(2)发送站点向目标站点发送信息，“令牌”由“空闲”转为“忙”，目标站点接受信息后并继续转发数据。

(3)发送站点接受返回数据后，“令牌”由“忙”转为“空闲”，并将“令牌”送往下一个站点。

`特点:`

优点：在重负荷环路中，令牌的循环工作方式，效率较高。并且具有可调整性，可以给不同网站设置不同优先级，具有很强的实时性。

缺点：在轻负荷中，工作效率偏低；控制电路较为复杂；需要设计监控器，监控令牌的异常情况。

### 5.令牌总线访问控制方法

​		IEEE 802.4标准规定了令牌总线（Token bus)访问控制方法和物理层技术规范

`令牌总线访问控制方法的原理:`

​		把总线或树形网络中的各个站点按照一定顺序排列形成一个逻辑环，只有在逻辑环上的站点才有资格获取“令牌”，只有“令牌”的持有者才有资格发送信息。信息是双向传递的，每个站都能检测其他站点发送的信息，在传递“令牌”的过程中，要加上目的地的地址。

`特点:`

优点：各工作站对介质的共享权力是均等的，可以设置优先级，也可以不可以设置优先级；有很好的吞吐能力，吞吐量随数据传输速率的增高而增加并随介质的饱和而稳定下来但并不下降；各站点之间不需要检测冲突；有一定的实时性。

缺点：控制电路复杂，成本高，轻负载时传输效率低。

### 6.以太网

​		以太网是一种产生较早、使用最为广泛的局域网，以太网规范即DIX规范。IEEE802.3就是以以太网规范为主要依据而制定的标准。

#### 6.1 以太网概述

`以太网的帧结构:`

![image-20231206152058722](E:\typora\Project\数据通讯与计算机网络.assets\image-20231206152058722.png)

`帧的发送流程:`

整体流程与CSMA/CD相似

​	(1)一个站点在发送数据帧之前，首先要检测总线是否空闲，以确定总线上是否有其他节点正在发送数据。

​	(2)如果总线空闲，则可以发送；如果总线忙碌，则要继续检测，直到空闲。

​	(3)工作站开始占用信道发送信息时，用冲突检测器继续对网络检测一段时间，一边发送一边监听，若信息相同，则证明发送	正常，占用总线成功，继续发送；若结果不一致，则说明有冲突，应立刻停止发送。

​	(4)如果在发送信息的过程中检测到冲突，即发送的信息与监听的信，则进入发送**“冲突加强信号”**阶段，此时要向总线上发送	一串阻塞信号，通知总线上各站冲突已经发生。再等待一个随机时间后，重复上述过程进行发送。

​	8(5)冲突结束后，延迟随机一段时间，再去征用总线。每个接收站点对接收到的帧必须进行如下的帧有效性检查。

帧有效性检查如下：

​	滤除因为“冲突”产生的“帧碎片”。

​	检查帧的目的地址地段（DA）是否与本节点的地址相匹配。

​	对帧进行CRC校验。

​	对帧进行长度校验。

​	去除帧头和帧尾，保留有效的数据帧。

`接收流程:`

以太网中不发送数据信息的站点一直处于接收状态






## 九.Internet

### 1.IP

#### 1.1 IP的主要功能：

​	IP的基本功能是对数据包进行相应的寻址和路由，并从一个网络转发到另一个网络

​	IP的另一项工作是分割和重编在运输层被分割的数据包

#### 1.2 IP的重要特性：

​	非连接性与不可靠性

​	非连接性是指，经过IP处理后的数据报是相互独立的，可按不同的路径传输到目的地。

​	不可靠性是指，IP没有提供对数据流在传输时的可靠性控制。

#### 1.3 IP数据报的格式：

​                      	<img src="E:\typora\Project\数据通讯与计算机网络.assets\image-20231206203857602.png" alt="image-20231206203857602" style="zoom:67%;" />

​	部分重要部分解释：

​	**版本**：表示IP的版本，该值为“4”或者“6”

​	**片偏移**：表示分片后，本片在原来数据中的位置，以8字节为1个单位。首字节的编号等于 “片偏移×8”

​	**首部长**：表示首部的长度，占4bit,可表示的最大数值为15，意为15个单位，60个字节，典型的首部长度为20个字节，此时				 的值为5。

​	**生存时间**：表示本数据报的最大生存时间，占8bit，每当包经过一个路由器，该值减一，则也表示它还能跳的次数。

​	**协议**：该字段表示哪一个上层协议准备接收IP包中的数据。占8bit

​				例如：06H代表TCP,11H代表UDP，01H代表ICMP

​	**标志**：该字段使用前两位，第一位表示后面是否有分片的数据报片，第二位表示是否允许数据报分片。

![image-20231206211400907](E:\typora\Project\数据通讯与计算机网络.assets\image-20231206211400907.png)

![image-20231206211421399](E:\typora\Project\数据通讯与计算机网络.assets\image-20231206211421399.png)

### 2.IP地址

#### 2.1 物理地址和逻辑地址

采用点分十进制的方法描述IP地址。以字节为单位，将IP分为4个字节，每个字节使用十进制表示，再用符号‘.'分割。

例如“218.30.12.168”

#### 2.2 IP地址的分类

按照IP地址最高4位的值，将IP地址分为A,B,C,D,E五类。

![img](https://img-blog.csdnimg.cn/20190705095636130.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzM3NzMyODI5,size_16,color_FFFFFF,t_70)

此外，IP地址又可以分为动态地址和静态地址两类。动态地址就是计算机与Internet连接后，网络会分配一个IP地址给计算机。这样网络的地址资源可以节省，利用效率可以提高。

#### 2.3特殊IP地址

**网络地址：**网络号不空而主机号为全0，例如211.213.18.0表示其网络地址为211.213.18

**直接广播地址：**网络号不空而主机号为全1，例如211.213.18.255为直接广播地址，表示211.213.18下的所有用户

**有限广播地址**：255.255.255.255

**本机地址：**0.0.0.0

**回送地址:**127.0.0.1 用于测试网络应用程序

### 3.子网与子网掩码

#### 3.1划分子网的原因

​	(1)充分使用地址

​	(2)划分管理职责

​	(3)提高网络性能

#### 3.2划分子网的方法

​		子网只能在主机域内借用，网络域内不能使用，此时要注意IP的类型，A类有3字节，B类有2字节，C类有1字节的可划分区域，注意在借位的时候不要超过了可划分范围。

​		先确定需要划分多少个子网，若2个子网，则向主机号域中借用1位；若四个子网，则向主机号域中借用2两位，以此类推。

再根据子网掩码，确定哪些部分为主机号，哪些部分为网络号，主机号从高位向低位借位。

#### 3.3 子网掩码

​	一个IP地址有没有划分子网，子网号有多少位，是通过子网屏蔽码来标识的。子网屏蔽码也被称为子网掩码。

​	子网掩码为网络及子网地址部分置1、主机地址置0形成的IP地址，其被用来区分IP地址中的网络与主机地址。

![image-20231206212029396](E:\typora\Project\数据通讯与计算机网络.assets\image-20231206212029396.png)

​	在分配子网的过程中，优先考虑子网的个数，后面用主机的个数进行验证，如果满足则子网分配成功。

​	上题中，分配9个子网，则需要借4位，11110000=240,每个子网最多15台主机，则一共135台小于240台，验证分配正确。

![image-20231207162945626](E:\typora\Project\数据通讯与计算机网络.assets\image-20231207162945626.png)

判断是否是在同一个子网的方法就是同时用两个IP地址同时“与”子网掩码。

### 4. Internet传输层协议

​	   传输层的作用是提供进程到进程的通信服务。由于它通常支持端节点的应用进程之间的通信，因此传输层的协议有时也被称为端到端协议。

​	   TCP/IP协议组在传输层主要包括两个协议：TCP(传输控制协议)和UDP(用户数据协议)，TCP提供了一种在节点上运行的进程之间传输信息的可靠的数据流传送模式，UDP则提供一种不可靠的无连接传送机制。

`TCP的报文格式:`

<img src="E:\typora\Project\数据通讯与计算机网络.assets\image-20231206161121205.png" alt="image-20231206161121205" style="zoom:67%;" />

IP信息可分为首部与数据部分，数据部分可以分为TCP首部与TCP数据部分。TCP首部固定占20字节。IP首部20字节。

`UDP的报文格式:`

![image-20231206171106124](E:\typora\Project\数据通讯与计算机网络.assets\image-20231206171106124.png)

UDP数据报由首部和数据两部分组成，其中首部只有8B（字节）,上图中IP首部占20字节。

### 5.例题

**一个UDP用户数据报的数据字段为8192字节，要使用以太网来传送，以太网的数据链路层一个数据帧中数据字段的最大长度为1500字节。应当划分为几个IP数据报片（IP数据报使用固定长度报首）？每一个IP数据报片的数据字段长度和片偏移字段的值是多少？**

答：IP数据报为数据链路层帧的数据部分，因此，IP数据报长度不能超过1500字节，去掉报头20字节，IP数据报的数据部分长度不能超过1480字节（1.5分）。UDP数据报的报首长度固定为8字节，因此，UDP报文长度为8200字节（1.5分）。8200=1480*5+800，因此应当划分为6个IP数据报片（3分），前5个分片数据字段长度为1480字节，第6个分片数据长度为800字节。各分片数据字段首字节在分片前的数据字段中的偏移量分别为0、1480、2960、4440、5920、7400（每个0.5分，共3分），片偏移字段值以8字节为1单位，因此，各分片偏移字段值依次为0、185、370、555、740、925（每个0.5分，共3分）。

## 十.网络规划与设计

子网划分

复习实验3

![image-20231207161355805](E:\typora\Project\数据通讯与计算机网络.assets\image-20231207161355805.png)

配置端口过程

`en`

`config t`

`no ip routing`

`int e0/0`

`ip address  202.103.2.1 255.255.255.0`

`no shut`

`end`

展示路由表

`show ip route`

配置静态IP地址

`ip route ip地址 子网掩码 网关`

![image-20231207161541075](E:\typora\Project\数据通讯与计算机网络.assets\image-20231207161541075.png)

配置RIP路由

![image-20231207162503329](E:\typora\Project\数据通讯与计算机网络.assets\image-20231207162503329.png)

​	在每台路由器上配置了RIP协议，并指定了要广播的网络地址。

配置OSPF路由

![image-20231207160739274](E:\typora\Project\数据通讯与计算机网络.assets\image-20231207160739274.png)

![image-20231207160330813](E:\typora\Project\数据通讯与计算机网络.assets\image-20231207160330813.png)

让所有区域与骨干区域area 0 相连，即可实现互相通信